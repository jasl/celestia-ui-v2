<!DOCTYPE html>
<html lang="zh-CN" data-theme="celestia-dawn">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>Playground - Celestia</title>
  <link rel="icon" type="image/png" href="/favicon.png">
  <link rel="stylesheet" href="./assets/application.css">
  <script type="module" src="./js/application.js"></script>
</head>

<body class="h-dvh overflow-hidden bg-base-100" data-controller="playground">
  <!-- Main Layout: Nested Drawers for Left and Right panels -->
  <div class="drawer lg:drawer-open h-full min-h-0" data-controller="drawer" data-drawer-id-value="left-drawer">
    <input id="left-drawer" type="checkbox" class="drawer-toggle" data-drawer-target="toggle" data-action="change->drawer#handleChange">
    
    <!-- Main Content Area (includes right drawer) -->
    <div class="drawer-content flex flex-col h-full min-h-0 overflow-hidden">
      
      <!-- Right Drawer wrapper -->
      <div class="drawer drawer-end xl:drawer-open h-full min-h-0" data-controller="drawer" data-drawer-id-value="right-drawer">
        <input id="right-drawer" type="checkbox" class="drawer-toggle" data-drawer-target="toggle" data-action="change->drawer#handleChange">
        
        <!-- Center Content -->
        <div class="drawer-content flex flex-col h-full min-h-0 overflow-hidden">
          
          <!-- Top Navbar -->
          <header class="navbar h-14 min-h-14 px-2 md:px-4 bg-base-100/80 backdrop-blur-md border-b border-base-300/40 shrink-0 relative z-[100]">
            <div class="navbar-start gap-2">
              <!-- Mobile: Left drawer toggle -->
              <label for="left-drawer" class="btn btn-ghost btn-sm btn-square lg:hidden" aria-label="打开角色面板">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <rect width="18" height="18" x="3" y="3" rx="2"/>
                  <path d="M9 3v18"/>
                </svg>
              </label>
              
              <!-- Logo (desktop) -->
              <a href="/" class="hidden lg:flex items-center gap-2">
                <img src="/logo.png" alt="Celestia" class="w-7 h-7 rounded-lg">
              </a>
              
              <!-- Session title -->
              <div class="flex items-center gap-2 min-w-0">
                <span class="badge badge-xs badge-primary"></span>
                <span class="truncate text-sm font-medium max-w-32 sm:max-w-48 md:max-w-64">
                  艾丽西亚的魔法小屋
                </span>
                <button class="btn btn-ghost btn-xs btn-square opacity-50 hover:opacity-100">
                  <svg xmlns="http://www.w3.org/2000/svg" class="w-3.5 h-3.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"/>
                  </svg>
                </button>
              </div>
            </div>

            <div class="navbar-center hidden md:flex">
              <!-- Model selector -->
              <div class="flex items-center gap-2">
                <select class="select select-sm select-ghost w-44">
                  <option>Claude 3.5 Sonnet</option>
                  <option>GPT-4.1</option>
                  <option>本地 · Mistral 7B</option>
                  <option>Gemini Pro</option>
                </select>
                <div class="badge badge-outline badge-success badge-sm gap-1">
                  <span class="w-1.5 h-1.5 rounded-full bg-success animate-pulse"></span>
                  已连接
                </div>
              </div>
            </div>

            <div class="navbar-end gap-1">
              <!-- New chat button -->
              <button class="btn btn-ghost btn-sm btn-square" title="新对话">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M12 5v14"/>
                  <path d="M5 12h14"/>
                </svg>
              </button>
              
              <!-- Theme toggle -->
              <label class="swap swap-rotate btn btn-ghost btn-sm btn-square" data-controller="theme">
                <input type="checkbox" class="theme-controller" value="celestia-night"
                       data-theme-target="checkbox" data-action="change->theme#toggle">
                <svg class="swap-off w-5 h-5 fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                  <path d="M5.64,17l-.71.71a1,1,0,0,0,0,1.41,1,1,0,0,0,1.41,0l.71-.71A1,1,0,0,0,5.64,17ZM5,12a1,1,0,0,0-1-1H3a1,1,0,0,0,0,2H4A1,1,0,0,0,5,12Zm7-7a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V4A1,1,0,0,0,12,5ZM5.64,7.05a1,1,0,0,0,.7.29,1,1,0,0,0,.71-.29,1,1,0,0,0,0-1.41l-.71-.71A1,1,0,0,0,4.93,6.34Zm12,.29a1,1,0,0,0,.7-.29l.71-.71a1,1,0,1,0-1.41-1.41L17,5.64a1,1,0,0,0,0,1.41A1,1,0,0,0,17.66,7.34ZM21,11H20a1,1,0,0,0,0,2h1a1,1,0,0,0,0-2Zm-9,8a1,1,0,0,0-1,1v1a1,1,0,0,0,2,0V20A1,1,0,0,0,12,19ZM18.36,17A1,1,0,0,0,17,18.36l.71.71a1,1,0,0,0,1.41,0,1,1,0,0,0,0-1.41ZM12,6.5A5.5,5.5,0,1,0,17.5,12,5.51,5.51,0,0,0,12,6.5Zm0,9A3.5,3.5,0,1,1,15.5,12,3.5,3.5,0,0,1,12,15.5Z"/>
                </svg>
                <svg class="swap-on w-5 h-5 fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                  <path d="M21.64,13a1,1,0,0,0-1.05-.14,8.05,8.05,0,0,1-3.37.73A8.15,8.15,0,0,1,9.08,5.49a8.59,8.59,0,0,1,.25-2A1,1,0,0,0,8,2.36,10.14,10.14,0,1,0,22,14.05,1,1,0,0,0,21.64,13Zm-9.5,6.69A8.14,8.14,0,0,1,7.08,5.22v.27A10.15,10.15,0,0,0,17.22,15.63a9.79,9.79,0,0,0,2.1-.22A8.11,8.11,0,0,1,12.14,19.73Z"/>
                </svg>
              </label>
              
              <!-- Mobile: Right drawer toggle -->
              <label for="right-drawer" class="btn btn-ghost btn-sm btn-square xl:hidden" aria-label="打开设置面板">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/>
                  <circle cx="12" cy="12" r="3"/>
                </svg>
              </label>
              
              <!-- User menu -->
              <div class="dropdown dropdown-end z-[100]">
                <div tabindex="0" role="button" class="avatar placeholder">
                  <div class="w-8 rounded-full bg-gradient-to-tr from-primary to-secondary text-primary-content">
                    <span class="text-sm">U</span>
                  </div>
                </div>
                <ul tabindex="0" class="dropdown-content menu menu-sm mt-3 w-52 rounded-box bg-base-200/95 backdrop-blur-md shadow-lg z-[100]">
                  <li class="menu-title text-xs">当前用户</li>
                  <li><span class="font-medium">@storyteller</span></li>
                  <li><hr class="border-base-content/10 my-1"></li>
                  <li><a href="#">个人资料</a></li>
                  <li><a href="#">设置</a></li>
                  <li><a href="#">历史对话</a></li>
                  <li><hr class="border-base-content/10 my-1"></li>
                  <li><a href="/" class="text-error">退出登录</a></li>
                </ul>
              </div>
            </div>
          </header>

          <!-- Chat Area -->
          <main class="flex-1 flex flex-col min-h-0 overflow-hidden relative z-0">
            <!-- Messages -->
            <div class="flex-1 overflow-y-auto min-h-0 px-3 md:px-6 py-4 space-y-4" data-playground-target="messages">
              <!-- System message -->
              <div class="flex justify-center">
                <div class="badge badge-ghost gap-1 text-xs">
                  <svg xmlns="http://www.w3.org/2000/svg" class="w-3 h-3" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10"/>
                    <path d="M12 16v-4"/>
                    <path d="M12 8h.01"/>
                  </svg>
                  对话开始于 2024年12月12日
                </div>
              </div>

              <!-- AI Message -->
              <div class="chat chat-start">
                <div class="chat-image avatar placeholder">
                  <div class="w-10 rounded-full bg-secondary text-secondary-content">
                    <span>艾</span>
                  </div>
                </div>
                <div class="chat-header mb-1">
                  <span class="font-medium">艾丽西亚</span>
                  <time class="text-xs opacity-50 ml-2">12:30</time>
                </div>
                <div class="chat-bubble chat-bubble-secondary">
                  <p>欢迎来到 Celestia 的魔法酒馆，旅人。</p>
                  <p class="mt-2">我是艾丽西亚，魔法学徒的导师。在这里，我们可以一起编织故事、探索幻想世界，或者只是聊聊天。</p>
                  <p class="mt-2">今晚想从哪里开始呢？</p>
                </div>
                <div class="chat-footer mt-1 flex gap-1">
                  <button class="btn btn-ghost btn-xs opacity-50 hover:opacity-100">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-3.5 h-3.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"/>
                    </svg>
                  </button>
                  <button class="btn btn-ghost btn-xs opacity-50 hover:opacity-100">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-3.5 h-3.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <rect width="14" height="14" x="8" y="8" rx="2" ry="2"/>
                      <path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>
                    </svg>
                  </button>
                  <button class="btn btn-ghost btn-xs opacity-50 hover:opacity-100">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-3.5 h-3.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/>
                      <path d="M21 3v5h-5"/>
                      <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/>
                      <path d="M8 16H3v5"/>
                    </svg>
                  </button>
                </div>
              </div>

              <!-- User Message -->
              <div class="chat chat-end">
                <div class="chat-header mb-1">
                  <time class="text-xs opacity-50 mr-2">12:31</time>
                  <span class="font-medium">你</span>
                </div>
                <div class="chat-bubble chat-bubble-primary">
                  我想先测试一下角色扮演的效果。能给我讲讲这个酒馆的故事吗？
                </div>
                <div class="chat-footer mt-1 flex gap-1 justify-end">
                  <button class="btn btn-ghost btn-xs opacity-50 hover:opacity-100">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-3.5 h-3.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"/>
                    </svg>
                  </button>
                </div>
              </div>

              <!-- AI Message -->
              <div class="chat chat-start">
                <div class="chat-image avatar placeholder">
                  <div class="w-10 rounded-full bg-secondary text-secondary-content">
                    <span>艾</span>
                  </div>
                </div>
                <div class="chat-header mb-1">
                  <span class="font-medium">艾丽西亚</span>
                  <time class="text-xs opacity-50 ml-2">12:32</time>
                </div>
                <div class="chat-bubble chat-bubble-secondary">
                  <p>*微微一笑，手指轻轻划过吧台上古老的木纹*</p>
                  <p class="mt-2">这座酒馆名为「Celestia」—— 在古语中意为「天界之火」。传说它建于三百年前的一场流星雨之夜...</p>
                  <p class="mt-2">那时，一位名叫塞拉斯的旅行法师在这片土地上目睹了天空中划过的无数光芒。他相信那是诸神留下的祝福，于是在陨石坠落的地方建起了这座小屋。</p>
                  <p class="mt-2">*指向角落里发着幽幽蓝光的水晶*</p>
                  <p class="mt-2">看到那块水晶了吗？那就是当年的陨石碎片。据说它能够感应到旅人的故事，当有人讲述真挚的冒险经历时，它就会发出温暖的光芒。</p>
                </div>
              </div>

              <!-- Typing indicator -->
              <div class="chat chat-start" data-playground-target="typingIndicator" style="display: none;">
                <div class="chat-image avatar placeholder">
                  <div class="w-10 rounded-full bg-secondary text-secondary-content">
                    <span>艾</span>
                  </div>
                </div>
                <div class="chat-bubble chat-bubble-secondary">
                  <span class="loading loading-dots loading-sm"></span>
                </div>
              </div>
            </div>

            <!-- Input Area -->
            <footer class="shrink-0 border-t border-base-300/40 bg-base-100/80 backdrop-blur-md px-3 md:px-6 py-3">
              <!-- Quick Replies -->
              <div class="mb-3" data-controller="quick-replies">
                <div class="flex items-start gap-2">
                  <!-- Replies Container -->
                  <div class="flex-1 space-y-1 overflow-hidden transition-all duration-300" 
                       data-quick-replies-target="container"
                       style="max-height: 7.5rem;">
                    <button class="btn btn-sm btn-ghost btn-block justify-center font-normal text-base-content/80 hover:text-base-content hover:bg-base-200/60">
                      继续
                    </button>
                    <button class="btn btn-sm btn-ghost btn-block justify-center font-normal text-base-content/80 hover:text-base-content hover:bg-base-200/60">
                      这真是个有趣的故事，能告诉我更多细节吗？
                    </button>
                    <button class="btn btn-sm btn-ghost btn-block justify-center font-normal text-base-content/80 hover:text-base-content hover:bg-base-200/60">
                      *环顾四周，试图找到那块神秘的水晶*
                    </button>
                    <button class="btn btn-sm btn-ghost btn-block justify-center font-normal text-base-content/80 hover:text-base-content hover:bg-base-200/60 hidden" data-quick-replies-target="extra">
                      塞拉斯现在在哪里？
                    </button>
                    <button class="btn btn-sm btn-ghost btn-block justify-center font-normal text-base-content/80 hover:text-base-content hover:bg-base-200/60 hidden" data-quick-replies-target="extra">
                      我想点一杯酒，这里有什么推荐的吗？
                    </button>
                    <button class="btn btn-sm btn-ghost btn-block justify-center font-normal text-base-content/80 hover:text-base-content hover:bg-base-200/60 hidden" data-quick-replies-target="extra">
                      *从背包里掏出一本古老的日记* 你看看这个，有没有见过类似的符文？
                    </button>
                  </div>
                  <!-- Expand/Collapse Toggle -->
                  <button class="btn btn-ghost btn-sm btn-square shrink-0 opacity-60 hover:opacity-100" 
                          data-action="click->quick-replies#toggle"
                          data-quick-replies-target="toggleBtn"
                          title="展开更多">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 transition-transform duration-300" data-quick-replies-target="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path d="m6 9 6 6 6-6"/>
                    </svg>
                  </button>
                </div>
              </div>

              <!-- Quick actions -->
              <div class="flex flex-wrap gap-2 mb-3">
                <button class="btn btn-xs btn-ghost rounded-full gap-1">
                  <svg xmlns="http://www.w3.org/2000/svg" class="w-3.5 h-3.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/>
                  </svg>
                  扩写细节
                </button>
                <button class="btn btn-xs btn-ghost rounded-full gap-1">
                  <svg xmlns="http://www.w3.org/2000/svg" class="w-3.5 h-3.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect width="12" height="12" x="2" y="10" rx="2" ry="2"/>
                    <path d="m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6"/>
                    <path d="M6 18h.01"/>
                    <path d="M10 14h.01"/>
                    <path d="M15 6h.01"/>
                    <path d="M18 9h.01"/>
                  </svg>
                  随机事件
                </button>
                <button class="btn btn-xs btn-ghost rounded-full gap-1">
                  <svg xmlns="http://www.w3.org/2000/svg" class="w-3.5 h-3.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"/>
                    <path d="M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"/>
                    <path d="M7 3v4a1 1 0 0 0 1 1h7"/>
                  </svg>
                  写入记忆
                </button>
                <button class="btn btn-xs btn-ghost rounded-full gap-1">
                  <svg xmlns="http://www.w3.org/2000/svg" class="w-3.5 h-3.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10"/>
                    <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
                    <path d="M12 17h.01"/>
                  </svg>
                  旁白模式
                </button>
              </div>
              
              <!-- Input -->
              <div class="flex items-end gap-2">
                <div class="flex-1 relative">
                  <textarea 
                    class="textarea w-full resize-none pr-10" 
                    rows="2"
                    placeholder="输入你的回复，在这里继续故事..."
                    data-playground-target="input"
                    data-action="keydown->playground#handleKeydown"
                  ></textarea>
                  <button class="btn btn-ghost btn-xs btn-square absolute right-2 bottom-2 opacity-50 hover:opacity-100" title="添加附件">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path d="m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48"/>
                    </svg>
                  </button>
                </div>
                <button class="btn btn-primary btn-square" data-action="click->playground#send" data-playground-target="sendButton">
                  <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="m22 2-7 20-4-9-9-4Z"/>
                    <path d="M22 2 11 13"/>
                  </svg>
                </button>
              </div>
              
              <!-- Footer info -->
              <div class="flex justify-between items-center mt-2 text-xs text-base-content/50">
                <div class="flex items-center gap-3">
                  <span>
                    <kbd class="kbd kbd-xs">Shift</kbd> + <kbd class="kbd kbd-xs">Enter</kbd> 换行
                  </span>
                </div>
                <div class="flex items-center gap-3">
                  <span>Tokens: 1,247 / 4,096</span>
                </div>
              </div>
            </footer>
          </main>
        </div>

        <!-- Right Drawer Side (Settings Panel) -->
        <div class="drawer-side z-[105]">
          <label for="right-drawer" aria-label="关闭设置面板" class="drawer-overlay"></label>
          <aside class="w-80 h-full bg-base-200/95 backdrop-blur-md border-l border-base-300/40 flex flex-col">
            <!-- Header -->
            <div class="h-14 min-h-14 flex items-center justify-between px-4 border-b border-base-300/40">
              <span class="font-medium">参数设置</span>
              <div class="flex items-center gap-1">
                <button class="btn btn-ghost btn-xs">保存预设</button>
                <label for="right-drawer" class="btn btn-ghost btn-xs btn-square xl:hidden">
                  <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M18 6 6 18"/>
                    <path d="m6 6 12 12"/>
                  </svg>
                </label>
              </div>
            </div>
            
            <!-- Content -->
            <div class="flex-1 overflow-y-auto p-4 space-y-6">
              <!-- Model Selection -->
              <fieldset class="fieldset">
                <legend class="fieldset-legend text-xs uppercase tracking-wide opacity-70">模型</legend>
                <select class="select select-sm w-full">
                  <option>Claude 3.5 Sonnet</option>
                  <option>GPT-4.1</option>
                  <option>本地 · Mistral 7B</option>
                  <option>Gemini Pro</option>
                </select>
              </fieldset>

              <!-- Temperature -->
              <div class="space-y-2">
                <div class="flex items-center justify-between">
                  <span class="text-xs uppercase tracking-wide opacity-70">Temperature</span>
                  <span class="text-xs font-mono">0.80</span>
                </div>
                <input type="range" min="0" max="200" value="80" class="range range-xs range-primary">
                <div class="flex justify-between text-[10px] opacity-50 px-1">
                  <span>精确</span>
                  <span>创意</span>
                </div>
              </div>

              <!-- Top P -->
              <div class="space-y-2">
                <div class="flex items-center justify-between">
                  <span class="text-xs uppercase tracking-wide opacity-70">Top P</span>
                  <span class="text-xs font-mono">0.95</span>
                </div>
                <input type="range" min="0" max="100" value="95" class="range range-xs range-secondary">
              </div>

              <!-- Max Tokens -->
              <div class="space-y-2">
                <div class="flex items-center justify-between">
                  <span class="text-xs uppercase tracking-wide opacity-70">最大回复长度</span>
                  <span class="text-xs font-mono">2048</span>
                </div>
                <input type="range" min="256" max="4096" value="2048" step="256" class="range range-xs">
              </div>

              <div class="divider text-xs opacity-50">高级选项</div>

              <!-- Toggles -->
              <div class="space-y-3">
                <label class="flex items-center justify-between cursor-pointer">
                  <span class="text-sm">流式输出</span>
                  <input type="checkbox" class="toggle toggle-sm toggle-primary" checked>
                </label>
                <label class="flex items-center justify-between cursor-pointer">
                  <span class="text-sm">自动生成标题</span>
                  <input type="checkbox" class="toggle toggle-sm" checked>
                </label>
                <label class="flex items-center justify-between cursor-pointer">
                  <span class="text-sm">显示 Token 计数</span>
                  <input type="checkbox" class="toggle toggle-sm" checked>
                </label>
                <label class="flex items-center justify-between cursor-pointer">
                  <span class="text-sm">保存对话历史</span>
                  <input type="checkbox" class="toggle toggle-sm" checked>
                </label>
              </div>

              <div class="divider text-xs opacity-50">预设管理</div>

              <!-- Presets -->
              <div class="space-y-2">
                <button class="btn btn-sm btn-ghost justify-start w-full">
                  <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/>
                  </svg>
                  创意写作
                </button>
                <button class="btn btn-sm btn-ghost justify-start w-full">
                  <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/>
                    <circle cx="9" cy="7" r="4"/>
                    <path d="M22 21v-2a4 4 0 0 0-3-3.87"/>
                    <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                  </svg>
                  角色扮演
                </button>
                <button class="btn btn-sm btn-ghost justify-start w-full">
                  <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 20h9"/>
                    <path d="M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z"/>
                  </svg>
                  精准问答
                </button>
              </div>
            </div>
          </aside>
        </div>
      </div>
    </div>

    <!-- Left Drawer Side (Characters/Scenes/Memory Panel) -->
    <div class="drawer-side z-[110]">
      <label for="left-drawer" aria-label="关闭角色面板" class="drawer-overlay"></label>
      <aside class="w-72 xl:w-80 h-full bg-base-200/95 backdrop-blur-md border-r border-base-300/40 flex flex-col">
        <!-- Header -->
        <div class="h-14 min-h-14 flex items-center gap-3 px-4 border-b border-base-300/40">
          <img src="/logo.png" alt="Celestia" class="w-8 h-8 rounded-lg">
          <div class="flex-1 min-w-0">
            <div class="font-semibold text-sm leading-tight truncate">Celestia</div>
            <div class="text-xs text-base-content/60">AI 酒馆 · Playground</div>
          </div>
          <label for="left-drawer" class="btn btn-ghost btn-xs btn-square lg:hidden">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M18 6 6 18"/>
              <path d="m6 6 12 12"/>
            </svg>
          </label>
        </div>

        <!-- Tabs & Content Container -->
        <div class="flex-1 flex flex-col overflow-hidden" data-controller="panel-switcher" data-panel-switcher-default-value="characters">
          <!-- Tabs -->
          <div class="px-3 pt-3 shrink-0">
            <div role="tablist" class="tabs tabs-box tabs-sm w-full">
              <button role="tab" class="tab" data-panel-switcher-target="tab" data-panel-switcher-id-param="characters" data-action="click->panel-switcher#switch">角色</button>
              <button role="tab" class="tab" data-panel-switcher-target="tab" data-panel-switcher-id-param="scenes" data-action="click->panel-switcher#switch">场景</button>
              <button role="tab" class="tab" data-panel-switcher-target="tab" data-panel-switcher-id-param="memory" data-action="click->panel-switcher#switch">记忆</button>
            </div>
          </div>

          <!-- Tab Content -->
          <div class="flex-1 overflow-y-auto">
          <!-- Characters Panel -->
          <div data-panel-switcher-target="panel" data-panel-switcher-id="characters">
            <!-- Section: 正在值班 -->
            <div class="px-3 pt-3 pb-1 flex items-center justify-between">
              <span class="text-xs font-medium opacity-60 uppercase tracking-wide">正在值班</span>
              <span class="badge badge-xs badge-success">活跃</span>
            </div>
            <ul class="list bg-transparent px-3">
              <li class="list-row hover:bg-base-300/50 cursor-pointer bg-base-300/30 rounded-box">
                <div class="avatar placeholder">
                  <div class="w-10 rounded-full bg-secondary text-secondary-content">
                    <span class="text-sm">艾</span>
                  </div>
                </div>
                <div class="flex-1 min-w-0">
                  <div class="font-medium text-sm truncate">艾丽西亚</div>
                  <div class="text-xs opacity-60 truncate">魔法学徒导师</div>
                </div>
                <span class="status status-success self-center"></span>
              </li>
            </ul>
            
            <!-- Section: 可用角色 -->
            <div class="px-3 pt-4 pb-1">
              <span class="text-xs font-medium opacity-60 uppercase tracking-wide">可用角色</span>
            </div>
            <ul class="list bg-transparent px-3">
              <li class="list-row hover:bg-base-300/50 cursor-pointer rounded-box">
                <div class="avatar placeholder">
                  <div class="w-10 rounded-full bg-primary/20 text-primary">
                    <span class="text-sm">塞</span>
                  </div>
                </div>
                <div class="flex-1 min-w-0">
                  <div class="font-medium text-sm truncate">塞拉斯</div>
                  <div class="text-xs opacity-60 truncate">酒馆创始人 · 幽灵</div>
                </div>
              </li>
              <li class="list-row hover:bg-base-300/50 cursor-pointer rounded-box">
                <div class="avatar placeholder">
                  <div class="w-10 rounded-full bg-accent/20 text-accent">
                    <span class="text-sm">露</span>
                  </div>
                </div>
                <div class="flex-1 min-w-0">
                  <div class="font-medium text-sm truncate">露娜</div>
                  <div class="text-xs opacity-60 truncate">占星师</div>
                </div>
              </li>
              <li class="list-row hover:bg-base-300/50 cursor-pointer rounded-box">
                <div class="avatar placeholder">
                  <div class="w-10 rounded-full bg-warning/20 text-warning">
                    <span class="text-sm">铁</span>
                  </div>
                </div>
                <div class="flex-1 min-w-0">
                  <div class="font-medium text-sm truncate">铁锤</div>
                  <div class="text-xs opacity-60 truncate">矮人铁匠</div>
                </div>
              </li>
            </ul>
            
            <div class="px-3 pt-3">
              <button class="btn btn-ghost btn-sm w-full justify-start gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M12 5v14"/>
                  <path d="M5 12h14"/>
                </svg>
                添加新角色
              </button>
            </div>
          </div>

          <!-- Scenes Panel -->
          <div class="hidden" data-panel-switcher-target="panel" data-panel-switcher-id="scenes">
            <!-- Section: 当前场景 -->
            <div class="px-3 pt-3 pb-1 flex items-center justify-between">
              <span class="text-xs font-medium opacity-60 uppercase tracking-wide">当前场景</span>
            </div>
            <ul class="list bg-transparent px-3">
              <li class="list-row hover:bg-base-300/50 cursor-pointer bg-base-300/30 rounded-box">
                <div class="w-10 h-10 rounded-lg bg-gradient-to-br from-primary/20 to-secondary/20 flex items-center justify-center shrink-0">
                  <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 opacity-70" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                    <polyline points="9 22 9 12 15 12 15 22"/>
                  </svg>
                </div>
                <div class="flex-1 min-w-0">
                  <div class="font-medium text-sm truncate">酒馆大厅</div>
                  <div class="text-xs opacity-60 truncate">温暖的壁炉，古老的木桌</div>
                </div>
              </li>
            </ul>
            
            <!-- Section: 可用场景 -->
            <div class="px-3 pt-4 pb-1">
              <span class="text-xs font-medium opacity-60 uppercase tracking-wide">可用场景</span>
            </div>
            <ul class="list bg-transparent px-3">
              <li class="list-row hover:bg-base-300/50 cursor-pointer rounded-box">
                <div class="w-10 h-10 rounded-lg bg-info/10 flex items-center justify-center shrink-0">
                  <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-info" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/>
                    <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
                  </svg>
                </div>
                <div class="flex-1 min-w-0">
                  <div class="font-medium text-sm truncate">藏书阁</div>
                  <div class="text-xs opacity-60 truncate">神秘的魔法书籍</div>
                </div>
              </li>
              <li class="list-row hover:bg-base-300/50 cursor-pointer rounded-box">
                <div class="w-10 h-10 rounded-lg bg-success/10 flex items-center justify-center shrink-0">
                  <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-success" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"/>
                  </svg>
                </div>
                <div class="flex-1 min-w-0">
                  <div class="font-medium text-sm truncate">地下室</div>
                  <div class="text-xs opacity-60 truncate">尘封的秘密</div>
                </div>
              </li>
            </ul>
            
            <div class="px-3 pt-3">
              <button class="btn btn-ghost btn-sm w-full justify-start gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M12 5v14"/>
                  <path d="M5 12h14"/>
                </svg>
                创建新场景
              </button>
            </div>
          </div>

          <!-- Memory Panel -->
          <div class="hidden" data-panel-switcher-target="panel" data-panel-switcher-id="memory">
            <div class="px-3 pt-3 pb-1 flex items-center justify-between">
              <span class="text-xs font-medium opacity-60 uppercase tracking-wide">记忆条目</span>
            </div>
            <ul class="list bg-transparent px-3">
              <li class="list-row hover:bg-base-300/50 cursor-pointer rounded-box">
                <div class="flex flex-col gap-1 min-w-0">
                  <div class="flex items-center gap-2">
                    <h3 class="font-medium text-sm">艾丽西亚的身份</h3>
                    <span class="badge badge-xs badge-primary shrink-0">角色</span>
                  </div>
                  <p class="text-xs opacity-60 line-clamp-2">
                    艾丽西亚是一位年轻的魔法导师，负责指导初学者掌握基础魔法。她性格温和但教学严格...
                  </p>
                </div>
              </li>
              <li class="list-row hover:bg-base-300/50 cursor-pointer rounded-box">
                <div class="flex flex-col gap-1 min-w-0">
                  <div class="flex items-center gap-2">
                    <h3 class="font-medium text-sm">酒馆历史</h3>
                    <span class="badge badge-xs badge-secondary shrink-0">世界</span>
                  </div>
                  <p class="text-xs opacity-60 line-clamp-2">
                    Celestia 酒馆建于三百年前的流星雨之夜，由旅行法师塞拉斯创立...
                  </p>
                </div>
              </li>
              <li class="list-row hover:bg-base-300/50 cursor-pointer rounded-box">
                <div class="flex flex-col gap-1 min-w-0">
                  <div class="flex items-center gap-2">
                    <h3 class="font-medium text-sm">陨石水晶</h3>
                    <span class="badge badge-xs badge-accent shrink-0">物品</span>
                  </div>
                  <p class="text-xs opacity-60 line-clamp-2">
                    酒馆角落的蓝色水晶是当年陨石的碎片，据说能感应真挚的冒险故事...
                  </p>
                </div>
              </li>
            </ul>
            
            <div class="px-3 pt-3">
              <button class="btn btn-ghost btn-sm w-full justify-start gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M12 5v14"/>
                  <path d="M5 12h14"/>
                </svg>
                添加记忆条目
              </button>
            </div>
          </div>
          <!-- End Tab Content -->
          </div>
        <!-- End Tabs & Content Container -->
        </div>

        <!-- Footer -->
        <div class="p-3 border-t border-base-300/40 shrink-0">
          <button class="btn btn-sm btn-ghost w-full justify-start gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
              <polyline points="17 8 12 3 7 8"/>
              <line x1="12" x2="12" y1="3" y2="15"/>
            </svg>
            导入角色卡
          </button>
        </div>
      </aside>
    </div>
  </div>
</body>

</html>
